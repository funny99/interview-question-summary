# 闭包
闭包（closure）是一个函数以及其捆绑的周边环境状态（lexical environment，词法环境）的引用的组合。换而言之，闭包让开发者可以从内部函数访问外部函数的作用域。在 JavaScript 中，闭包会随着函数的创建而被同时创建。

红宝书里面说：“闭包就是指有权访问另一个函数作用域中的变量的函数“。
圣经宝典里面说：”从技术的角度来讲，所有的JavaScript函数都是闭包；它们都是对象，它们都关联到作用域链“。
You dont't know JS say:"当函数可以记住并访问所在的词法作用域时，就产生了闭包，即使函数是当前词法作用域之外执行".
只要存在调用内部函数的可能，js就需要保存被引用的函数。js运行时需要跟踪引用到的这个内部函数的所有变量，一直到最后一个变量废除，js的GC才能回收这些变量的内存空间。

作用1：隐藏变量，避免全局污染
作用2：可以读取函数内部的变量
同时闭包使用不当，优点就变成了缺点：
缺点1：导致变量不会被垃圾回收机制回收，造成内存消耗
缺点2：不恰当的使用闭包可能会造成内存泄漏的问题
这里简单说一下，为什么使用闭包时变量不会被垃圾回收机制收销毁呢，这里需要了解一下JS垃圾回收机制；
JS规定在一个函数作用域内，程序执行完以后变量就会被销毁，这样可节省内存；使用闭包时，按照作用域链的特点，闭包（函数）外面的变量不会被销毁，因为函数会一直被调用，所以一直存在，如果闭包使用过多会造成内存销毁。

> [MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures)

> [那些高级/资深的前端是如何回答JavaScript面试题的 （一）](https://juejin.cn/post/6971727286856843295)

# script 标签中 defer 和 async 的区别？
script标签会阻碍html解析，只有下载好并执行完脚本才会继续解析html。
- async： 解析html过程中进行脚本的异步下载，下载完成立马执行，有可能会阻断html的解析
- defer：完全不会阻碍html的解析，解析完成后再按照顺序执行脚本
![](./images/script-async-defer.awebp)

> [图解 script 标签中的 async 和 defer 属性](https://juejin.cn/post/6894629999215640583)